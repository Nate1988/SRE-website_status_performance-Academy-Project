services:
  otel-collector:
    image: otel/opentelemetry-collector-contrib:0.135.0
    volumes:
      - ./otel-collector-config.yaml:/otel-collector-config.yaml:ro
    command:
      - --config=/otel-collector-config.yaml
    ports:
      - "4317:4317"       # OTLP gRPC receiver
      - "16686:16686"     # Jaeger UI (optional, if you want UI)
    networks:
      - otel-net

  website-status-app:
    build:
      context: .
      dockerfile: Dockerfile
    depends_on:
      - otel-collector
    environment:
      - OTEL_EXPORTER_OTLP_ENDPOINT=otel-collector:4317
    ports:
      - "5000:5000"
    networks:
      - otel-net

networks:
  otel-net:
    driver: bridge
